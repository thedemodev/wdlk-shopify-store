
.Banner {
  $hsl-light-sand: hsv-to-hsl(32, 2%, 93%);
  $hsl-coral: hsv-to-hsl(5, 61%, 100%);
  $hsl-yellow: hsv-to-hsl(41, 67%, 100%);

  &--main {
    --alpha-mask: url(https://cdn.shopify.com/s/files/1/0742/2733/t/34/assets/WDLK_Banner_alpha_mask_Smartphone_@2x_retina.svg);
    --image-mask: url(https://cdn.shopify.com/s/files/1/0742/2733/t/34/assets/WDLK_Main-Banner_Smartphone_@2x_retina.png);

    max-height: 100vh;
    box-sizing: border-box;
    background-color: hsla(
      nth($hsl-light-sand, 1),
      nth($hsl-light-sand, 2),
      nth($hsl-light-sand, 3), 1);

    .Banner-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: auto;
      perspective-origin: center;
      perspective: 100vw;
    }

    .Banner-media {
      display: block;
      position: relative;
      padding-top: 149.47%;
      width: 100vw;

      @include media(small) {
        padding-top: 133.33%;
      }

      @include media(medium) {
        padding-top: 56.25%;
      }

      &::before,
      &::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100%;
        opacity: var(--theme-alpha);
        transition: opacity calc(var(--theme-interval) * 1ms) ease-out;
        pointer-events: none;
      }

      &::before {
        z-index: 1;
        background: linear-gradient(135deg,
          hsla(
            nth($hsl-yellow, 1),
            nth($hsl-yellow, 2),
            nth($hsl-yellow, 3), .25),
          hsla(
            nth($hsl-coral, 1),
            nth($hsl-coral, 2),
            nth($hsl-coral, 3), .25) 80%);
        background-blend-mode: screen;
        mix-blend-mode: multiply;
      }

      &::after {
        z-index: 2;
        background: var(--image-mask),
          linear-gradient(135deg,
          hsla(
            nth($hsl-yellow, 1),
            nth($hsl-yellow, 2),
            nth($hsl-yellow, 3), .35),
          hsla( nth($hsl-coral, 1),
          nth($hsl-coral, 2),
          nth($hsl-coral, 3), .35) 80%);
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center top;
        mix-blend-mode: multiply;

        @supports(-webkit-mask-image: var(--alpha-mask)) {
          -webkit-mask-image: var(--alpha-mask);
          -webkit-mask-size: cover;
          -webkit-mask-position: center top;
          -webkit-mask-repeat: no-repeat;
        }

        @supports(mask-image: var(--alpha-mask)) {
          mask-image: var(--alpha-mask);
          mask-size: cover;
          mask-position: center top;
          mask-repeat: no-repeat;
        }

        @include media(small) {
          --alpha-mask: url(https://cdn.shopify.com/s/files/1/0742/2733/t/34/assets/WDLK_Banner_alpha_mask_Tablet.svg);
          --image-mask: url(https://cdn.shopify.com/s/files/1/0742/2733/t/34/assets/WDLK_Main-Banner_Tablet_@1x.png);
        }

        @include media(medium) {
          --alpha-mask: url(https://cdn.shopify.com/s/files/1/0742/2733/t/34/assets/WDLK_Banner_alpha_mask_Desktop.svg);
          --image-mask: url(https://cdn.shopify.com/s/files/1/0742/2733/t/34/assets/WDLK_Main-Banner_Desktop_@1x.png);
        }
      }
    }

    .Banner-content {
      z-index: 3;
      transform: translateX(-50%) translateY(-35%);
    }
  }
}

.Themed {
  --hsla-coral: hsla(5.4, 100%, 69.4%, 1);
  --hsla-coral8: hsla(8.4, 100%, 66.5%, 1);
  --hsla-gray: hsla(0, 0%, 60%, 1);
  --hsla-gray205: hsla(205, 11.9%, 39.6%, 1);
  --hsla-yellow: hsla(41.4, 100%, 66.5%, 1);
  --hsla-white: hsla(0, 0%, 100%, 1);

  --theme: var(--theme-invert, var(--theme-fallback));
  --theme-alpha: 0;
  --theme-fallback: var(--hsla-coral);
  --theme-interval: 5000;

  animation: theme-animation calc(var(--theme-interval) * 1ms) ease;

  @keyframes theme-animation {
    0% {
      --theme-invert: var(--hsla-white);
      --theme-transparent: transparent;
      --theme-alpha: 1;
    }

    80% {
      --theme-invert: var(--hsla-white);
      --theme-transparent: transparent;
      --theme-alpha: .2;
    }

    100% {
      --theme-alpha: 0;
    }
  }

  .Btn {
    --theme-invert: var(--theme-transparent, var(--theme));
    border: 1px solid var(--theme);
    background: var(--theme-invert);
    transition: background calc(var(--theme-interval) * 1ms) linear,
      border-color calc((var(--theme-interval) / 2) * 1ms) linear;
  }

  .Logo-img,
  .ShoppingBag-icon {
    color: var(--theme);
    fill: currentColor;
    transition: color calc((var(--theme-interval) / 2) * 1ms) ease-out;
  }

  .AccountNavigation-item {
    --theme: var(--theme-invert, var(--theme-fallback));
    --theme-fallback: var(--hsla-gray);

    color: var(--theme, var(--theme-fallback));
    transition: color calc((var(--theme-interval) / 2) * 1ms) linear;
  }

  .Navigation-link {
    --theme: var(--theme-invert, var(--theme-fallback));
    --theme-fallback:  var(--hsla-gray205);

    color: var(--theme, var(--theme-fallback));
    transition: color calc((var(--theme-interval) / 2) * 1ms) linear;

    &::after {
      background-color: var(--theme, var(--theme-fallback));
    }
  }

  @include media(medium) {
    .is-undocked {
      .Navigation-link {
        --theme: var(--hsla-gray205);
      }
      .AccountNavigation-item {
        --theme: var(--hsla-gray);
      }
      .Logo-img,
      .ShoppingBag-icon {
        --theme: var(--hsla-coral);
      }
    }
  }
}

.Gradient {
  &-stop {
    --theme: var(--theme-invert, var(--theme-fallback));
    transition: stop-color
      calc((var(--theme-interval) / 1.5) * 1ms)
      cubic-bezier(0.755, 0.050, 0.855, 0.060);

    &:nth-child(1) {
      --theme-fallback: var(--hsla-yellow);
      stop-color: var(--theme, var(--theme-fallback));
    }

    &:nth-child(2) {
      --theme-fallback: var(--hsla-coral8);
      stop-color: var(--theme, var(--theme-fallback));
    }
  }
}
